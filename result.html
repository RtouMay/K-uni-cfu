<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Ù†ØªÛŒØ¬Ù‡ Ø¢Ø²Ù…ÙˆÙ†</title>

    <style>
        @font-face {
            font-family: "YekanBakh";
            src: url("YekanBakh.woff2") format("woff2");
        }
        *{box-sizing:border-box}
        body{
            margin:0;
            min-height:100vh;
            font-family:"YekanBakh",sans-serif;
            background:radial-gradient(circle at top,#222,#050509 50%,#000 100%);
            color:#f5f5f5;
            display:flex;justify-content:center;align-items:center;
            padding:20px;
        }

        .card{
            max-width:900px;
            width:100%;
            background:linear-gradient(145deg,#0d0d12,#050509);
            border-radius:24px;
            padding:30px 24px;
            box-shadow:0 18px 60px rgba(0,0,0,.9);
            position:relative;overflow:hidden;
        }
        .card::before{
            content:"";position:absolute;inset:-40%;
            background:
                radial-gradient(circle at 0 0,rgba(245,200,66,.08),transparent 55%),
                radial-gradient(circle at 100% 100%,rgba(255,255,255,.06),transparent 55%);
            opacity:.6;
        }

        .inside{position:relative;z-index:2}
        h1{text-align:center;margin:0 0 20px;font-size:22px;color:#f5c842;}

        .summary{
            background:#111;padding:20px;border-radius:18px;
            border:1px solid rgba(255,255,255,.06);
            margin-bottom:20px;
        }
        .summary-item{font-size:15px;margin:8px 0;}

        .percent{
            font-size:45px;
            font-weight:700;
            text-align:center;
            margin:15px 0;
            color:#f5c842;
        }

        .analysis{
            margin-top:20px;padding:18px;
            background:#1a1a1a;border-radius:18px;
            border:1px solid rgba(255,255,255,.08);
            font-size:14px;line-height:1.9;
        }

        .btn{
            border:none;border-radius:999px;
            padding:10px 18px;font-size:14px;
            font-family:inherit;cursor:pointer;
            margin:10px 5px;
        }
        .btn-primary{
            background:linear-gradient(135deg,#f5c842,#f0a900);
            color:#1d1203;font-weight:700;
        }
        .btn-secondary{
            background:#222;color:#ddd;
        }
        .btn-tertiary{
            background:transparent;color:#bbb;font-size:12px;
        }

        .bottom-meta{text-align:center;margin-top:18px;font-size:12px;opacity:.7;}
        .designer{margin-top:5px;font-weight:600;}

    </style>

</head>
<body>

<div class="card">
    <div class="inside">

        <h1>Ù†ØªÛŒØ¬Ù‡ Ø¢Ø²Ù…ÙˆÙ† Ø´Ù…Ø§</h1>

        <div class="summary">
            <div class="summary-item">ØªØ¹Ø¯Ø§Ø¯ Ø¯Ø±Ø³Øª: <span id="correctCount"></span></div>
            <div class="summary-item">ØªØ¹Ø¯Ø§Ø¯ ØºÙ„Ø·: <span id="wrongCount"></span></div>
            <div class="summary-item">Ø²Ù…Ø§Ù† Ø¢Ø²Ù…ÙˆÙ†: <span id="timeSpent"></span></div>
        </div>

        <div class="percent" id="percentBox">0%</div>

        <div class="analysis" id="analysisBox"></div>

        <div style="text-align:center;">
            <button id="retryBtn" class="btn btn-primary">Ø¯ÙˆØ¨Ø§Ø±Ù‡ Ø¢Ø²Ù…ÙˆÙ† Ù‡Ù…ÛŒÙ† Ø¯Ø±Ø³</button>
            <button id="wrongBtn" class="btn btn-secondary">ÙÙ‚Ø· Ø³ÙˆØ§Ù„Ø§Øª ØºÙ„Ø·</button>
            <button id="backBtn" class="btn btn-tertiary">Ø¨Ø±Ú¯Ø´Øª Ø¨Ù‡ Ù„ÛŒØ³Øª Ø¯Ø±Ø³â€ŒÙ‡Ø§</button>
        </div>

        <div class="bottom-meta">
            <div>Ù†ØªØ§ÛŒØ¬ Ø¢Ø²Ù…ÙˆÙ† Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯Ù‡ Ùˆ Ø¨Ø±Ø§ÛŒ ØªØ­Ù„ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ø¨Ø¹Ø¯ÛŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯.</div>
            <div class="designer">Ø·Ø±Ø§Ø­: Ù…Ø­Ù…Ø¯Ù…Ù‡Ø¯ÛŒ Ø¯ÛŒÙ†Ø§Ø±ÙˆÙ†Ø¯</div>
        </div>

    </div>
</div>


<script>

    const username = localStorage.getItem("konkur_username");
    const field = localStorage.getItem("konkur_field");
    const examType = localStorage.getItem("konkur_examType");
    const subject = localStorage.getItem("konkur_subject");

    const correct = Number(localStorage.getItem("quiz_correct"));
    const wrong = Number(localStorage.getItem("quiz_wrong"));
    const time = Number(localStorage.getItem("quiz_time"));

    if (!username || subject === null){
        window.location.href = "index.html";
    }

    document.getElementById("correctCount").textContent = correct;
    document.getElementById("wrongCount").textContent = wrong;

    // ØªØ¨Ø¯ÛŒÙ„ Ø²Ù…Ø§Ù†
    let m = String(Math.floor(time / 60)).padStart(2, "0");
    let s = String(time % 60).padStart(2, "0");
    document.getElementById("timeSpent").textContent = `${m}:${s}`;

    // Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø¯Ø±ØµØ¯
    const total = correct + wrong;
    const percent = Math.round((correct / total) * 100);

    document.getElementById("percentBox").textContent = percent + "%";


    /* -----------------------
       ØªØ­Ù„ÛŒÙ„ Ø³Ø·Ø­ Ø¹Ù…Ù„Ú©Ø±Ø¯
    ----------------------- */

    const analysisBox = document.getElementById("analysisBox");

    let analysis = "";

    if (percent >= 85) {
        analysis += "Ø¹Ø§Ù„ÛŒ! ğŸ‘ Ø¹Ù…Ù„Ú©Ø±Ø¯Øª Ù†Ø´ÙˆÙ† Ù…ÛŒâ€ŒØ¯Ù‡ Ú©Ø§Ù…Ù„Ø§Ù‹ Ø±ÙˆÛŒ Ø§ÛŒÙ† Ø¯Ø±Ø³ Ù…Ø³Ù„Ø·ÛŒ. ";
        analysis += "ÙÙ‚Ø· Ø§Ø¯Ø§Ù…Ù‡ Ø¨Ø¯Ù‡ Ùˆ Ù‡Ù…ÛŒÙ† Ø±ÙˆÙ†Ø¯ Ø±Ùˆ Ù†Ú¯Ù‡ Ø¯Ø§Ø±. ";
    } 
    else if (percent >= 60) {
        analysis += "Ø®ÙˆØ¨ Ø¨ÙˆØ¯! ğŸ¤ ØªÙˆ Ù…Ø³ÛŒØ± Ø¯Ø±Ø³ØªÛŒ Ù‡Ø³ØªÛŒ. ";
        analysis += "Ú†Ù†Ø¯ØªØ§ Ù†Ú©ØªÙ‡ Ú©ÙˆÚ†ÛŒÚ© Ø¯Ø§Ø±ÛŒ Ú©Ù‡ Ø¨Ø§ Ù…Ø±ÙˆØ± Ø¯ÙˆØ¨Ø§Ø±Ù‡ Ø­Ù„ Ù…ÛŒØ´Ù‡. ";
    } 
    else if (percent >= 40) {
        analysis += "Ù…ØªÙˆØ³Ø·. Ø¨Ù‡ØªØ± Ø§Ø² Ø§ÛŒÙ†â€ŒÙ‡Ø§ Ù…ÛŒâ€ŒØªÙˆÙ†ÛŒ Ø¨Ø²Ù†ÛŒ. ";
        analysis += "ÛŒÙ‡ Ù…Ù‚Ø¯Ø§Ø± Ø±ÙˆÛŒ Ù†Ú©Ø§Øª Ù¾Ø§ÛŒÙ‡â€ŒØ§ÛŒ ÙˆÙ‚Øª Ø¨Ø°Ø§Ø± Ùˆ ØªØ³Øªâ€ŒÙ‡Ø§ÛŒ Ø³Ø§Ø¯Ù‡â€ŒØªØ± Ø±Ùˆ Ø§ÙˆÙ„ Ø¨Ø²Ù†. ";
    } 
    else {
        analysis += "Ù†ÛŒØ§Ø² Ø¨Ù‡ Ú©Ø§Ø± Ø¨ÛŒØ´ØªØ±ÛŒ Ø¯Ø§Ø±ÛŒ. ÙˆÙ„ÛŒ Ù†Ø§Ø§Ù…ÛŒØ¯ Ù†Ø´Ùˆ! ";
        analysis += "Ø§ÛŒÙ† Ù†ØªØ§ÛŒØ¬ Ø§ÙˆÙ„ Ø±Ø§Ù‡ Ù‡Ø³Øª Ùˆ Ø¨Ø§ ØªÙ…Ø±ÛŒÙ† Ø¯Ø±Ø³Øª Ø¨Ù‡ØªØ± Ù…ÛŒØ´ÛŒ. ";
    }

    // ØªØ­Ù„ÛŒÙ„ Ø§Ø¶Ø§ÙÙ‡ Ø¨Ø± Ø§Ø³Ø§Ø³ ØªØ¹Ø¯Ø§Ø¯ ØºÙ„Ø·
    if (wrong >= total * 0.5) {
        analysis += "Ø¨Ù‡ Ù†Ø¸Ø± Ù…ÛŒâ€ŒØ±Ø³Ù‡ Ù…Ø¯ÛŒØ±ÛŒØª Ø²Ù…Ø§Ù† Ùˆ ØªØ­Ù„ÛŒÙ„ Ú¯Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§ Ù…ÛŒâ€ŒØªÙˆÙ†Ù‡ Ú©Ù…Ú©Øª
